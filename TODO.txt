- make the diamond code be part of some shared library of utils.
